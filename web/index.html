<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯è½‰å‚µæŸ¥è©¢å·¥å…· - Rexå¤§å”æŠ•è³‡è³‡æ–™åº«</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            overflow-x: auto;
        }
        
        .nav-tab {
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: 500;
            color: #495057;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .nav-tab:hover {
            background: #e9ecef;
        }
        
        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }
        
        .content {
            padding: 30px;
            min-height: 600px;
        }
        
        .search-box {
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .data-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .data-table tr:hover {
            background: #f8f9fa;
        }
        
        .rank-badge {
            display: inline-block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
            font-weight: bold;
            color: white;
        }
        
        .rank-1 { background: #ffd700; }
        .rank-2 { background: #c0c0c0; }
        .rank-3 { background: #cd7f32; }
        .rank-other { background: #6c757d; }
        
        .positive { color: #dc3545; font-weight: bold; }
        .negative { color: #28a745; font-weight: bold; }
        
        .week-selector {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .week-button {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s;
        }
        
        .week-button:hover {
            background: #f8f9fa;
        }
        
        .week-button.active {
            background: #667eea;
            color: white;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
            color: #6c757d;
        }
        
        .stat-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .stat-card h3 {
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .chart-container {
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            color: #6c757d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // ç¤ºç¯„è³‡æ–™ - å¯¦éš›ä½¿ç”¨æ™‚æœƒå¾GitHubè®€å–
        const sampleWeeklyData = {
            "week_period": "2025/10/20~2025/10/23",
            "date": "2025-10-23",
            "top_volume": [
                {"rank": 1, "code": "30454", "name": "å°ç£å¤§å››", "volume": 4645},
                {"rank": 2, "code": "62822", "name": "åº·èˆ’äºŒ", "volume": 2612},
                {"rank": 3, "code": "82992", "name": "ç¾¤è¯äºŒ", "volume": 2463},
                {"rank": 4, "code": "84221", "name": "å¯å¯§è¡›ä¸€", "volume": 2376},
                {"rank": 5, "code": "61635", "name": "è¯é›»ç¶²äº”", "volume": 2252},
                {"rank": 6, "code": "23372", "name": "æ—ºå®äºŒ", "volume": 2214},
                {"rank": 7, "code": "62194", "name": "å¯Œæ—ºå››", "volume": 2048},
                {"rank": 8, "code": "65841", "name": "å—ä¿Šåœ‹éš›ä¸€", "volume": 1423},
                {"rank": 9, "code": "811210", "name": "è‡³ä¸Šå", "volume": 1376},
                {"rank": 10, "code": "27531", "name": "å…«æ–¹é›²é›†ä¸€", "volume": 1349}
            ],
            "top_gainers": [
                {"rank": 1, "code": "33571", "name": "è‡ºæ…¶ç§‘ä¸€", "close_price": 149.00, "change_pct": 11.19},
                {"rank": 2, "code": "23372", "name": "æ—ºå®äºŒ", "close_price": 130.50, "change_pct": 11.06},
                {"rank": 3, "code": "36894", "name": "æ¹§å¾·å››", "close_price": 168.00, "change_pct": 9.80},
                {"rank": 4, "code": "62843", "name": "ä½³é‚¦ä¸‰", "close_price": 117.20, "change_pct": 7.52},
                {"rank": 5, "code": "61635", "name": "è¯é›»ç¶²äº”", "close_price": 114.90, "change_pct": 7.28},
                {"rank": 6, "code": "62822", "name": "åº·èˆ’äºŒ", "close_price": 112.00, "change_pct": 6.67},
                {"rank": 7, "code": "37075", "name": "æ¼¢ç£Šäº”", "close_price": 149.00, "change_pct": 6.58},
                {"rank": 8, "code": "65841", "name": "å—ä¿Šåœ‹éš›ä¸€", "close_price": 150.00, "change_pct": 6.53},
                {"rank": 9, "code": "84041", "name": "ç™¾å’Œèˆˆæ¥­ä¸€KY", "close_price": 122.60, "change_pct": 5.60},
                {"rank": 10, "code": "66451", "name": "é‡‘è¬æ—ä¸€å‰µ", "close_price": 112.35, "change_pct": 5.59}
            ],
            "top_losers": [
                {"rank": 1, "code": "47223", "name": "åœ‹ç²¾åŒ–ä¸‰", "close_price": 130.00, "change_pct": -8.74},
                {"rank": 2, "code": "84672", "name": "æ³¢åŠ›äºŒKY", "close_price": 110.65, "change_pct": -6.15},
                {"rank": 3, "code": "61965", "name": "å¸†å®£äº”", "close_price": 172.00, "change_pct": -5.49},
                {"rank": 4, "code": "33133", "name": "æ–æˆä¸‰", "close_price": 117.50, "change_pct": -5.05},
                {"rank": 5, "code": "84891", "name": "ä¸‰è²å¾·ä¸€", "close_price": 160.00, "change_pct": -4.76},
                {"rank": 6, "code": "52843", "name": "jppä¸‰KY", "close_price": 180.00, "change_pct": -4.26},
                {"rank": 7, "code": "80282", "name": "æ˜‡é™½åŠå°é«”äºŒ", "close_price": 126.05, "change_pct": -4.14},
                {"rank": 8, "code": "54342", "name": "å´‡è¶ŠäºŒ", "close_price": 173.00, "change_pct": -3.89},
                {"rank": 9, "code": "69821", "name": "å¤§äº•æ³µæµ¦ä¸€", "close_price": 109.15, "change_pct": -3.49},
                {"rank": 10, "code": "67531", "name": "é¾å¾·é€ èˆ¹ä¸€", "close_price": 125.00, "change_pct": -3.40}
            ],
            "conversions": [
                {"code": "64146", "name": "æ¨ºæ¼¢å…­", "this_week": 10000, "last_week": 13940, "converted": -3940, "remaining_pct": 66.66},
                {"code": "62235", "name": "æ—ºçŸ½äº”", "this_week": 19305, "last_week": 22999, "converted": -3694, "remaining_pct": 55.15},
                {"code": "36534", "name": "å¥ç­–å››", "this_week": 9659, "last_week": 11264, "converted": -1605, "remaining_pct": 32.19},
                {"code": "82992", "name": "ç¾¤è¯äºŒ", "this_week": 54775, "last_week": 56279, "converted": -1504, "remaining_pct": 91.29},
                {"code": "64723", "name": "ä¿ç‘ä¸‰", "this_week": 5128, "last_week": 5982, "converted": -854, "remaining_pct": 30.16}
            ],
            "redemptions": [
                {"code": "99211", "name": "å·¨å¤§ä¸€", "original": 40000, "outstanding": 759, "remaining_pct": 1.89, "delist_date": "2025/10/30"},
                {"code": "52843", "name": "jppä¸‰KY", "original": 3000, "outstanding": 32, "remaining_pct": 1.06, "delist_date": "2025/11/17"},
                {"code": "64421", "name": "å…‰è–ä¸€", "original": 10000, "outstanding": 1731, "remaining_pct": 17.31, "delist_date": "2025/11/19"},
                {"code": "64723", "name": "ä¿ç‘ä¸‰", "original": 17000, "outstanding": 5128, "remaining_pct": 30.16, "delist_date": "2025/11/21"},
                {"code": "64144", "name": "æ¨ºæ¼¢å››", "original": 10000, "outstanding": 136, "remaining_pct": 1.36, "delist_date": "2025/11/21"},
                {"code": "34912", "name": "æ˜‡é”ç§‘äºŒ", "original": 10000, "outstanding": 5386, "remaining_pct": 53.86, "delist_date": "2025/12/8"}
            ]
        };
        
        function App() {
            const [activeTab, setActiveTab] = useState('é€±å ±');
            const [weeklyData, setWeeklyData] = useState(sampleWeeklyData);
            const [searchTerm, setSearchTerm] = useState('');
            
            const tabs = ['é€±å ±', 'æˆäº¤é‡æ’è¡Œ', 'æ¼²è·Œå¹…æ’è¡Œ', 'è½‰æ›è¿½è¹¤', 'è´–å›å…¬å‘Š', 'è¶¨å‹¢åˆ†æ'];
            
            const getRankBadgeClass = (rank) => {
                if (rank === 1) return 'rank-badge rank-1';
                if (rank === 2) return 'rank-badge rank-2';
                if (rank === 3) return 'rank-badge rank-3';
                return 'rank-badge rank-other';
            };
            
            const renderContent = () => {
                switch(activeTab) {
                    case 'é€±å ±':
                        return (
                            <div>
                                <div className="stat-cards">
                                    <div className="stat-card">
                                        <h3>è³‡æ–™æœŸé–“</h3>
                                        <div className="value">{weeklyData.week_period}</div>
                                    </div>
                                    <div className="stat-card">
                                        <h3>æˆäº¤é‡å‰10å</h3>
                                        <div className="value">{weeklyData.top_volume.length}æª”</div>
                                    </div>
                                    <div className="stat-card">
                                        <h3>æ¼²è·Œå¹…æ’è¡Œ</h3>
                                        <div className="value">{weeklyData.top_gainers.length + weeklyData.top_losers.length}æª”</div>
                                    </div>
                                    <div className="stat-card">
                                        <h3>è½‰æ›è¿½è¹¤</h3>
                                        <div className="value">{weeklyData.conversions.length}æª”</div>
                                    </div>
                                </div>
                                
                                <h2 style={{marginTop: '30px', marginBottom: '15px', color: '#667eea'}}>æœ¬é€±é‡é»æ‘˜è¦</h2>
                                <div style={{background: '#f8f9fa', padding: '20px', borderRadius: '10px', lineHeight: '1.8'}}>
                                    <p>ğŸ“Š <strong>æˆäº¤æœ€ç†±é–€:</strong> {weeklyData.top_volume[0].name}({weeklyData.top_volume[0].code}) æˆäº¤ {weeklyData.top_volume[0].volume.toLocaleString()} å¼µ</p>
                                    <p style={{marginTop: '10px'}}>ğŸ“ˆ <strong>æ¼²å¹…æœ€å¤§:</strong> {weeklyData.top_gainers[0].name}({weeklyData.top_gainers[0].code}) ä¸Šæ¼² {weeklyData.top_gainers[0].change_pct}%</p>
                                    <p style={{marginTop: '10px'}}>ğŸ“‰ <strong>è·Œå¹…æœ€å¤§:</strong> {weeklyData.top_losers[0].name}({weeklyData.top_losers[0].code}) ä¸‹è·Œ {weeklyData.top_losers[0].change_pct}%</p>
                                    <p style={{marginTop: '10px'}}>ğŸ”„ <strong>è½‰æ›æœ€å¤š:</strong> {weeklyData.conversions[0].name}({weeklyData.conversions[0].code}) è½‰æ› {Math.abs(weeklyData.conversions[0].converted).toLocaleString()} å¼µ</p>
                                </div>
                            </div>
                        );
                        
                    case 'æˆäº¤é‡æ’è¡Œ':
                        return (
                            <div>
                                <div className="search-box">
                                    <input 
                                        type="text" 
                                        className="search-input" 
                                        placeholder="æœå°‹CBåç¨±æˆ–ä»£ç¢¼..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                    />
                                </div>
                                <table className="data-table">
                                    <thead>
                                        <tr>
                                            <th>æ’å</th>
                                            <th>ä»£ç¢¼</th>
                                            <th>åç¨±</th>
                                            <th>æˆäº¤é‡(å¼µ)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {weeklyData.top_volume
                                            .filter(item => 
                                                item.name.includes(searchTerm) || 
                                                item.code.includes(searchTerm)
                                            )
                                            .map(item => (
                                                <tr key={item.code}>
                                                    <td>
                                                        <span className={getRankBadgeClass(item.rank)}>
                                                            {item.rank}
                                                        </span>
                                                    </td>
                                                    <td>{item.code}</td>
                                                    <td><strong>{item.name}</strong></td>
                                                    <td>{item.volume.toLocaleString()}</td>
                                                </tr>
                                            ))
                                        }
                                    </tbody>
                                </table>
                            </div>
                        );
                        
                    case 'æ¼²è·Œå¹…æ’è¡Œ':
                        return (
                            <div>
                                <h2 style={{marginBottom: '15px', color: '#dc3545'}}>æ¼²å¹…å‰10å</h2>
                                <table className="data-table">
                                    <thead>
                                        <tr>
                                            <th>æ’å</th>
                                            <th>ä»£ç¢¼</th>
                                            <th>åç¨±</th>
                                            <th>æ”¶ç›¤åƒ¹</th>
                                            <th>æ¼²å¹…%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {weeklyData.top_gainers.map(item => (
                                            <tr key={item.code}>
                                                <td>
                                                    <span className={getRankBadgeClass(item.rank)}>
                                                        {item.rank}
                                                    </span>
                                                </td>
                                                <td>{item.code}</td>
                                                <td><strong>{item.name}</strong></td>
                                                <td>{item.close_price.toFixed(2)}</td>
                                                <td className="positive">+{item.change_pct}%</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                                
                                <h2 style={{marginTop: '40px', marginBottom: '15px', color: '#28a745'}}>è·Œå¹…å‰10å</h2>
                                <table className="data-table">
                                    <thead>
                                        <tr>
                                            <th>æ’å</th>
                                            <th>ä»£ç¢¼</th>
                                            <th>åç¨±</th>
                                            <th>æ”¶ç›¤åƒ¹</th>
                                            <th>è·Œå¹…%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {weeklyData.top_losers.map(item => (
                                            <tr key={item.code}>
                                                <td>
                                                    <span className={getRankBadgeClass(item.rank)}>
                                                        {item.rank}
                                                    </span>
                                                </td>
                                                <td>{item.code}</td>
                                                <td><strong>{item.name}</strong></td>
                                                <td>{item.close_price.toFixed(2)}</td>
                                                <td className="negative">{item.change_pct}%</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        );
                        
                    case 'è½‰æ›è¿½è¹¤':
                        return (
                            <div>
                                <table className="data-table">
                                    <thead>
                                        <tr>
                                            <th>ä»£ç¢¼</th>
                                            <th>åç¨±</th>
                                            <th>æœ¬é€±å¼µæ•¸</th>
                                            <th>ä¸Šé€±å¼µæ•¸</th>
                                            <th>è½‰æ›å¼µæ•¸</th>
                                            <th>å‰©é¤˜æ¯”ç‡</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {weeklyData.conversions.map(item => (
                                            <tr key={item.code}>
                                                <td>{item.code}</td>
                                                <td><strong>{item.name}</strong></td>
                                                <td>{item.this_week.toLocaleString()}</td>
                                                <td>{item.last_week.toLocaleString()}</td>
                                                <td className="negative">{item.converted.toLocaleString()}</td>
                                                <td>{item.remaining_pct}%</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        );
                        
                    case 'è´–å›å…¬å‘Š':
                        return (
                            <div>
                                <table className="data-table">
                                    <thead>
                                        <tr>
                                            <th>ä»£ç¢¼</th>
                                            <th>åç¨±</th>
                                            <th>åŸç™¼è¡Œå¼µæ•¸</th>
                                            <th>æµé€šåœ¨å¤–</th>
                                            <th>å‰©é¤˜æ¯”ç‡</th>
                                            <th>çµ‚æ­¢æ›ç‰Œæ—¥</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {weeklyData.redemptions.map(item => (
                                            <tr key={item.code}>
                                                <td>{item.code}</td>
                                                <td><strong>{item.name}</strong></td>
                                                <td>{item.original.toLocaleString()}</td>
                                                <td>{item.outstanding.toLocaleString()}</td>
                                                <td style={{color: item.remaining_pct < 10 ? '#dc3545' : '#000'}}>
                                                    {item.remaining_pct}%
                                                </td>
                                                <td>{item.delist_date}</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        );
                        
                    case 'è¶¨å‹¢åˆ†æ':
                        return (
                            <div>
                                <div className="chart-container">
                                    <h3 style={{marginBottom: '20px', color: '#667eea'}}>è¶¨å‹¢åˆ†æåŠŸèƒ½</h3>
                                    <p style={{color: '#6c757d', lineHeight: '1.8'}}>
                                        ç•¶ç´¯ç©å¤šé€±è³‡æ–™å¾Œï¼Œæ­¤åŠŸèƒ½å°‡é¡¯ç¤ºï¼š<br/>
                                        â€¢ å„æª”CBçš„æˆäº¤é‡è¶¨å‹¢åœ–<br/>
                                        â€¢ åƒ¹æ ¼èµ°å‹¢è®ŠåŒ–<br/>
                                        â€¢ è½‰æ›å¼µæ•¸ç´¯ç©è®ŠåŒ–<br/>
                                        â€¢ å¸‚å ´ç†±é–€CBè¿½è¹¤<br/><br/>
                                        è«‹æŒçºŒä¸Šå‚³æ¯é€±è³‡æ–™ä»¥å»ºç«‹å®Œæ•´çš„æ­·å²è³‡æ–™åº«
                                    </p>
                                </div>
                            </div>
                        );
                        
                    default:
                        return <div>é¸æ“‡åŠŸèƒ½</div>;
                }
            };
            
            return (
                <div className="container">
                    <div className="header">
                        <h1>ğŸ” å¯è½‰å‚µæŸ¥è©¢å·¥å…·</h1>
                        <p>Rexå¤§å”æŠ•è³‡è³‡æ–™åº« - å°ˆæ¥­ã€å³æ™‚ã€å®Œæ•´çš„CBå¸‚å ´è³‡è¨Š</p>
                    </div>
                    
                    <div className="nav-tabs">
                        {tabs.map(tab => (
                            <button
                                key={tab}
                                className={`nav-tab ${activeTab === tab ? 'active' : ''}`}
                                onClick={() => setActiveTab(tab)}
                            >
                                {tab}
                            </button>
                        ))}
                    </div>
                    
                    <div className="content">
                        {renderContent()}
                    </div>
                    
                    <div className="footer">
                        <p>è³‡æ–™ä¾†æºï¼šå…ƒå¤§è­‰åˆ¸å‚µåˆ¸éƒ¨ | æ›´æ–°æ—¥æœŸï¼š{weeklyData.date}</p>
                        <p style={{marginTop: '5px'}}>æœ¬è³‡æ–™åƒ…ä¾›åƒè€ƒä½¿ç”¨ï¼ŒæŠ•è³‡äººæ‡‰ä¾æ“šå€‹äººå°ˆæ¥­åˆ¤æ–·é€²è¡ŒæŠ•è³‡æ±ºç­–</p>
                    </div>
                </div>
            );
        }
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
